<?phpnamespace App\Auth\Domain;use function App\addLog;use App\Common\CommonDomain;use App\Auth\Model\MenuModel as MenuModelModel;use function App\nowTime;/** * 系统日志类 * * @author lws */class MenuModel extends CommonDomain{    private static $Model = null;    public function __construct()    {        if (self::$Model == null) {            self::$Model = new MenuModelModel();        }    }    public function getLimitList($param)    {        if (is_object($param)) {            $param = get_object_vars($param);        }        $rs = array('list' => array(), 'count' => 0);        $rs['count'] = self::$Model->getLimitCount($param['keyWord']);        $rs['list'] = self::$Model->getLimitList($param);        return $rs;    }    public function getAllList($param)    {        if (is_object($param)) {            $param = get_object_vars($param);        }        $rs = array('list' => array(), 'count' => 0);        $rs['count'] = self::$Model->getCount(array());        $rs['list'] = self::$Model->getListByWhere(array(),$param['field'],$param['order']);        return $rs;    }    /** 获取单个规则信息     * @param $id     * @return mixed     */    public function getInfo($id)    {        $r = self::$Model->getInfo(array('id'=>$id));        return $r;    }    public function addModel($apiObj)    {        $param = get_object_vars($apiObj);        //检查规则标识是否重复，重复返回2        $r = self::$Model->checkRepeat($param['name']);        if ($r)            return 2;        //成功返回0，失败返回2        $r = self::$Model->addModel($param);        return $r == true ? 0 : 1;    }    /**修改规则     * @param $apiObj     * @return int 成功返回0，失败返回1，名称重复返回2     */    public function editModel($apiObj)    {        $param = get_object_vars($apiObj);        //检查名称重复，重复返回2        $r = self::$Model->checkRepeat($param['name'], $param['id']);        if ($r){            return 2;        }        $r = self::$Model->editModel($param['id'], $param);        if ($r == true) {            $id = $param['id'];            addLog("编辑菜单模块，编号：$id");        }        return $r == true ? 0 : 1;    }    /** 删除规则     * @param $ids id列表 如1,2,3     * @return int     */    public function delModel($ids)    {        $r = self::$Model->delModel($ids);        if ($r) {            $ids = json_encode($ids);            addLog("删除菜单模块，编号：$ids");        }        return $r == true ? 0 : 1;    }}